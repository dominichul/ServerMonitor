<div class="col-sm-4 col-xs-12">
  <table id="sitesTable">
    <thead class="thead-inverse">
    </thead>
    <tbody>
      <% if @sites.empty? %>
      <td> - </td>
      <td> - </td>
      <td> - </td>
      <td> - </td>
      <%else%>
      <script>
        hash = [];
        <% @sites.each do |s|%>
          hash.push({
            name:"<%=s.name%>",
            ipaddress:"<a href='http://<%=s.ipaddress%>' target='_blank'><%=s.ipaddress%></a>",
            status:"<% if !s.status.nil? %><% if s.status == true %>Online<% else %>Offline<% end %><% else %>Unknown<% end %>",
            view:'<%= link_to 'Edit', site_modal_path(id: s.id), remote: true %>'
          });
        <% end %>
        $('#sitesTable').bootstrapTable({
            columns:[{
                field: 'name',
                title: 'Server',
                sortable: true
              },{
                field: 'ipaddress',
                title: 'Address'
              },{
                field: 'status',
                title: 'Status',
                sortable: true,
                cellStyle: function(value){
                  if(value ==='Unknown'){
                      return { classes: 'warning' };
                  }else if(value === 'Online'){
                    return { classes: 'success'};
                  }else
                    return { classes: 'danger'};               
                }
              },{
                field: 'view',
                title: '*'
            }],
            data: hash
        });
      </script>
      <%end%>
    </tbody>
  </table>
</div>

<%= render "layouts/site_modal" %>

<div class="col-sm-8 col-xs-12">
  <%= render 'layouts/map'%>
  <hr class="thick-line">
  <div class="panel panel-primary" style="padding-bottom: 0;">
    <div class="panel-heading">
      <h3 class="panel-title"> Marker Types</h3>
    </div>
    <div class="panel-body">
      <table class="table" style="margin-bottom: 0px;">
        <tbody>
          <tr>
            <td style="padding-right: 0px; margin-right: 0px;"><img src="http://maps.google.com/mapfiles/ms/icons/green-dot.png" alt="Green Marker"></td>
            <td><h4>Online</h4></td>
            <td><img src="http://maps.google.com/mapfiles/ms/icons/red-dot.png" alt="Red Marker"></td>
            <td><h4>Offline</h4></td>
          </tr>
          <tr>
            <td><img src="http://maps.google.com/mapfiles/ms/icons/yellow-dot.png" alt="Red Marker"></td>
            <td><h4>Unknown</h4></td>
            <td><img src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m1.png" alt="Site Cluster" height="32"></td>
            <td><h4>Site Cluster</h4></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</hr>
</div>
</div>
